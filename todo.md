# 自動動画生成システム 開発TODO (MVP版)

## 開発フェーズ1: 環境構築・基盤設定

### 1.1 プロジェクト初期設定
- [x] プロジェクトディレクトリ構造の作成
- [x] requirements.txt の作成（必要ライブラリ定義）
- [x] .env ファイルテンプレートの作成
- [x] .gitignore ファイルの作成
- [x] config.py の作成（設定管理クラス）

### 1.2 API設定・認証
- [x] Google Gemini API キーの取得・設定
- [x] Unsplash API キーの取得・設定
- [x] VOICEVOX ローカル環境のセットアップ確認
- [x] 環境変数での API キー管理実装

## 開発フェーズ2: コア機能実装

### 2.1 スクリプト生成機能 (script_generator.py)
- [x] Gemini API クライアントクラスの作成
- [x] テーマ入力インターフェースの実装
- [x] 30秒動画用プロンプトテンプレートの作成
- [x] スクリプト生成関数の実装
- [x] 生成されたスクリプトの検証・整形機能
- [x] エラーハンドリングの実装

### 2.2 画像取得機能 (image_fetcher.py)
- [x] Unsplash API クライアントクラスの作成
- [x] テーマベースの画像検索機能
- [x] 画像ダウンロード機能（3-5枚）
- [x] 画像サイズ・品質チェック機能
- [x] ローカル画像保存機能
- [x] エラーハンドリングの実装

### 2.3 音声生成機能 (voice_generator.py)
- [x] VOICEVOX API クライアントの実装
- [x] スクリプトテキストの前処理機能
- [x] 音声合成リクエスト送信機能
- [x] WAV音声ファイル保存機能
- [x] 音声長さ（30秒）の調整機能
- [x] エラーハンドリングの実装

### 2.4 動画作成機能 (video_creator.py)
- [x] MoviePy を使用した動画編集クラスの作成
- [x] 画像スライドショー作成機能
- [x] 音声と画像の同期機能
- [x] 30秒動画の生成機能
- [x] MP4形式での出力機能
- [x] エラーハンドリングの実装

### 2.5 字幕追加機能 (subtitle_generator.py)
- [x] FFmpeg を使用した字幕追加クラスの作成
- [x] スクリプトテキストから字幕ファイル(.srt)生成機能
- [x] 音声の長さに基づく字幕タイミング自動調整
- [x] 日本語フォントの設定・字幕スタイリング
- [x] 動画への字幕埋め込み機能（FFmpeg）
- [x] 字幕付きMP4形式での出力機能
- [x] エラーハンドリングの実装

### 2.6 YouTube自動投稿機能 (youtube_uploader.py)
- [x] YouTube Data API v3 クライアントクラスの作成
- [x] OAuth 2.0認証フローの実装
- [x] 動画アップロード機能の実装
- [x] 動画タイトル・説明文の自動生成機能
- [x] プライベート設定での動画公開機能
- [x] アップロード進捗表示機能
- [x] アップロード完了後のURL取得機能
- [x] エラーハンドリングの実装

## 開発フェーズ3: メイン処理・統合

### 3.1 メイン実行ファイル (main.py)
- [x] 全モジュールの統合
- [x] ワークフロー制御クラスの実装
- [x] ユーザーインターフェース（コマンドライン）の実装
- [x] 処理進行状況の表示機能
- [x] 全体的なエラーハンドリング
- [x] 字幕生成モジュールの統合
- [x] 字幕追加ワークフローの実装
- [x] YouTube投稿モジュールの統合
- [x] YouTube投稿ワークフローの実装

### 3.2 設定管理 (config.py)
- [x] 設定項目の定義
- [x] 環境変数読み込み機能
- [x] デフォルト値の設定
- [x] 設定検証機能

## 開発フェーズ4: テスト・品質改善

### 4.1 単体テスト
- [x] script_generator のテスト
- [x] image_fetcher のテスト
- [x] voice_generator のテスト
- [x] video_creator のテスト
- [x] config のテスト
- [x] subtitle_generator のテスト
- [x] youtube_uploader のテスト

### 4.2 統合テスト
- [x] エンドツーエンドテストの実装
- [x] 各API連携のテスト
- [x] エラー状況でのテスト
- [x] 実際のテーマでの動作確認
- [x] 字幕付き動画生成の統合テスト
- [x] FFmpeg連携のテスト
- [x] YouTube API連携のテスト
- [x] YouTube投稿機能の統合テスト

### 4.3 品質改善
- [ ] コードレビュー・リファクタリング
- [ ] ログ機能の追加
- [ ] パフォーマンス最適化
- [ ] メモリ使用量の確認・最適化
- [x] hooksによる自動git操作の実装 (2025-07-08)
- [ ] hooksテストの自動化

## 開発フェーズ5: ドキュメント・完成

### 5.1 ドキュメント作成
- [ ] README.md の作成
- [ ] セットアップガイドの作成
- [ ] 使用方法の説明
- [ ] トラブルシューティングガイド

### 5.2 最終確認
- [ ] 全機能の動作テスト
- [ ] 異なるテーマでの複数回テスト
- [ ] エラー処理の確認
- [ ] 出力動画の品質確認

## 技術的課題・注意点

### API制限・エラー対応
- [ ] Gemini API レート制限への対応
- [ ] Unsplash API レート制限への対応
- [ ] VOICEVOX サーバー接続エラーの対応
- [ ] ネットワークエラーの対応

### ファイル管理
- [ ] 一時ファイルの適切な削除
- [ ] 出力ディレクトリの自動作成
- [ ] ファイル名の重複対応
- [ ] ディスク容量チェック

### パフォーマンス
- [ ] 画像ダウンロードの並列処理
- [ ] メモリ効率的な動画処理
- [ ] 処理時間の最適化

## 開発優先順位

### 高優先度（MVP必須機能）
1. スクリプト生成機能
2. 画像取得機能
3. 音声生成機能
4. 動画作成機能
5. 字幕追加機能
6. YouTube自動投稿機能
7. メイン処理統合

### 中優先度（品質向上）
1. エラーハンドリング
2. ログ機能
3. 設定管理
4. テスト

### 低優先度（将来拡張）
1. パフォーマンス最適化
2. 詳細ドキュメント
3. 追加機能

## 推定開発時間

- **フェーズ1**: 1-2時間
- **フェーズ2**: 8-12時間
- **フェーズ3**: 3-4時間
- **フェーズ4**: 4-6時間
- **フェーズ5**: 2-3時間

**総計**: 18-27時間

## 完了基準

各タスクの完了基準：
- [ ] コードが実装され、基本的な動作が確認できる
- [ ] エラーハンドリングが適切に実装されている
- [ ] テストが作成され、パスしている
- [ ] ドキュメントが整備されている